<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ข้อมูลส่วนตัว</title>
    <link rel="stylesheet" href="styles-head1.css">
    <link rel="icon" href="icon/inlover.png" type="image/png">
    <script src="loading.js"></script>
    <!-- <link rel="stylesheet" href="information-card.css"> -->
    <script>
        // ตรวจสอบสถานะการล็อกอินโดยอ่านค่าจาก Local Storage
        var isLoggedIn = localStorage.getItem('isLoggedIn');
        console.log(isLoggedIn);
        // ถ้ายังไม่ได้ล็อกอิน ให้เปลี่ยนเส้นทางไปยังหน้า login.html
        if (isLoggedIn === 'false') {
            window.location.href = 'login.html';
        }else if (isLoggedIn === null || isLoggedIn === undefined || isLoggedIn === ''){
            window.location.href = 'login.html';
        }
    </script>
    <style>
#loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    z-index: 1000;
}
.box-loading{
    display: flex;
    flex-direction: column;
    align-items: center;
    /* background-color: #000; */
}
.box-loading img{
    width:10rem;
}
.loading{
    /* position: relative; */
    font-family: sans-serif;
    text-transform: uppercase;
    font-size: 50px;
    letter-spacing: 4px;
    overflow: hidden;
    background: linear-gradient(90deg, #000, #b8afff, #000);
    background-repeat: no-repeat;
    background-size: 80%;
    animation: animate 1s linear infinite;
    -webkit-background-clip: text;
    -webkit-text-fill-color: rgba(255, 255, 255, 0);
}

@keyframes animate {
    0% {
        background-position: -500%;
    }
    100% {
        background-position: 500%;
    }
}
/* ส่วนของเนื้อหา */
.informaion{
    overflow-y: auto;
    padding-left: 100px; /*เพิ่ม Padding เพื่อให้การ์ดไม่ติดขอบ*/
    margin: 0;
    width: 100%;
    height: 100vh;
    display: flex;
    /* flex-direction: column; */
    padding-top: 2rem;
}
.box-information{
    height: 20rem;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}
.informaion #user-cards{
    /* background-color: aqua; */
}
.informaion #user-cards .card{
    background-color: #fafafa;
    display: flex;
    /* justify-content: center; */
    align-items: center;
    width: 14rem;
    height: 20rem;
    border-radius: 5px;
    overflow: hidden;
    margin-left: 2rem;
}
.informaion #user-cards img{
    width: 100%;
}
.informaion form, .informaion input {
    margin-left: 1rem;
    font-size: 1rem;
}
.informaion form button {
    margin: 0rem;;
}
.informaion .allowed-btn{
    margin-left: 1rem;
    font-size: 1rem;
}
.informaion .allowed-btn p{
    margin-top: 0.2rem;
}
.informaion button[type="submit"]{
    font-size: 0.8rem;
    border-radius: 4px;
    height: 1.5rem;
    font-weight: 600;
    text-transform: uppercase;
    -webkit-transition: all 200ms linear;
    transition: all 200ms linear;
    padding: 0 20px;
    /* letter-spacing: 1px; */
    align-items: center;
    background-color: #ffeba7;
    color: #000000;
    margin: 0;
}
.informaion button[type="submit"]:hover{
    background-color: #000000;
    color: #ffeba7;
}
    </style>
</head>
<body>
    <!-- เนื้อหาหน้าเว็บของคุณ -->
    <div id="loading-overlay">
        <div class="box-loading">
            <img src="icon/inlover.png" alt="">
            <p class="loading">In Lover</p>
        </div>
        <!-- In Lover -->
    </div>
    <!-- Sidebar Menu -->
    <div class="sidebar">
        <a href="information.html">
            <div id="profile">
                <!-- Change the src to the URL of the person icon -->
                <!-- <ion-icon name="person-outline"></ion-icon> -->
            </div>
        </a>
        <ul class="menu">
            <span>Menu</span>
            <li>
                <a href="information.html">
                    <ion-icon name="person-outline"></ion-icon>
                    <p>Profile</p>
                </a>
            </li>
            <li>
                <a href="dashboard.html">
                    <ion-icon name="home-outline"></ion-icon>
                    <p>Dashboard</p>
                </a>
            </li>
            <!-- <li>
                <a href="notifications.html">
                    <ion-icon name="notifications-outline"></ion-icon>
                    <p>Notifications</p>
                </a>
            </li> -->
            <li class="likes">
                <a href="find-partner.html">
                    <ion-icon name="people-outline"></ion-icon>
                    <p>Find Partner</p>
                </a>
            </li>
            <li class="likes">
                <a href="like-chat.html">
                    <ion-icon name="chatbox-outline"></ion-icon>
                    <p>Chat</p>
                </a>
            </li>
            <!-- <li class="switch-theme">
                <a href="#">
                    <ion-icon name="moon-outline"></ion-icon>
                    <p>Dark Mode</p>
                    <button>
                        <div class="circle"></div>
                    </button>
                </a>
            </li> -->
            <li>
                <a href="chat-admin.html">
                    <ion-icon name="headset-outline"></ion-icon>
                    <p>Contact Admin</p>
                </a>
            </li>
            <li>
                <a href="logout.php">
                    <ion-icon name="log-out-outline"></ion-icon>
                    <p>Logout</p>
                </a>
            </li>
        </ul>
    </div>
    <!-- Ionicons -->
    <script
        type="module"
        src="https://cdn.jsdelivr.net/npm/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script
        nomodule
        src="https://cdn.jsdelivr.net/npm/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <!-- Add the script to use Ionicons through CDN -->
    <script
        type="module"
        src="https://cdn.jsdelivr.net/npm/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script
        nomodule
        src="https://cdn.jsdelivr.net/npm/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <section class="informaion">
        <div id="user-cards"></div>
        <div class="box-information">
            <form action="upload-image.php" method="post" enctype="multipart/form-data">
                <label for="image">อัพโหลดโปรไฟล์</label>
                <input type="file" name="image" id="image" accept="image/*">
                <button onclick="redirectToPHP()" type="submit" name="upload">Upload</button>
            </form>
            <!-- <script src="information-card.js"></script> -->
            <div class="allowed-btn">
                <h3>ต้องมีการยืนยันตัวตนก่อนจึงจะใช้งานหน้าจับคู่ได้!</h3>
                <p><a href="information-edit.php">ไปหน้ายืนยันตัวตน..</a></p>
            </div>
        </div>
    </section>
    
</body>
<script>
    function redirectToPHP() {
        window.location.href = 'upload-image.php?showAlert=true';
    }
</script>
<script>
let containerDiv = document.getElementById('profile');
    fetch('match-img-myself.php')
        .then(response => response.json())
        .then(data1 => {
            data1.forEach(item1 => {
                const card_like = document.createElement('div');
                card_like.classList.add('card-show');
                card_like.innerHTML = `
                    <div class="img-profile">
                        <img src="uploads/${item1.image_path || 'profile_none.png'}" alt="${item1.user_name}">
                    </div>
                    <p>${item1.user_name}</p>
                `;
                containerDiv.appendChild(card_like);
                // Append the created card to the DOM or perform any other necessary actions
            });
        })
        .catch(error => {
            console.error('เกิดข้อผิดพลาดในการดึงข้อมูล:', error);
        });

// ดึงข้อมูลจาก PHP
fetch('information-card.php')
.then(response => response.json())
.then(data => {
    // สร้าง HTML สำหรับแสดงการ์ด
    const userCardsContainer = document.getElementById('user-cards');
    data.forEach(userData => {
        const cardElement = document.createElement('div');
        cardElement.classList.add('card');

        const imageElement = document.createElement('img');
        imageElement.src = 'uploads/' + userData.image_path; // เพิ่ม 'uploads/' ไปที่ userData.image_path
        imageElement.alt = 'User Image';

        const nameElement = document.createElement('p');
        nameElement.textContent = userData.user_name;

        cardElement.appendChild(imageElement);
        cardElement.appendChild(nameElement);

        userCardsContainer.appendChild(cardElement);
    });
})
.catch(error => console.error('Error fetching data:', error));
</script>
</html>
